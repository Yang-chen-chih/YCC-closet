import React, { useState, useEffect, useCallback } from 'react';
import { 
  Plus, 
  Trash2, 
  Sparkles, 
  ChevronRight, 
  CloudRain,
  Sun,
  RefreshCw,
  Snowflake,
  Cloud,
  CloudSun,
  MapPin,
  Info,
  Upload,
  Image as ImageIcon,
  Umbrella,
  LayoutGrid,
  Library,
  ThermometerSun,
  Waves
} from 'lucide-react';

// è‡ªå®šç¾©è¡£æ«ƒåœ–ç¤º SVG
const WardrobeIcon = ({ size = 24, className = "" }) => (
  <svg 
    width={size} 
    height={size} 
    viewBox="0 0 24 24" 
    fill="none" 
    stroke="currentColor" 
    strokeWidth="2" 
    strokeLinecap="round" 
    strokeLinejoin="round" 
    className={className}
  >
    <path d="M4 3h16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z" />
    <path d="M12 3v18" />
    <path d="M8 11h.01" />
    <path d="M16 11h.01" />
  </svg>
);

// API è¨­å®š
const CWA_API_KEY = "CWA-6CCF2861-4317-4000-BED2-E9BACDB2DEC3";
const CITY_NAME = "è‡ºåŒ—å¸‚"; 

const App = () => {
  // --- ç‹€æ…‹ç®¡ç† ---
  const [items, setItems] = useState([]);
  const [weather, setWeather] = useState({ 
    temp: 22, 
    condition: 'æ™´æ™‚å¤šé›²', 
    city: CITY_NAME, 
    pop: 0, 
    desc: 'æ­£åœ¨ç‚ºæ‚¨æ‰“æ¢ä»Šå¤©çš„å¤©æ°£æ¶ˆæ¯...',
    loading: true 
  });
  const [recommendation, setRecommendation] = useState(null);
  const [isAdding, setIsAdding] = useState(false);
  
  const [newItem, setNewItem] = useState({ 
    name: '', 
    category: 'tops', 
    warmth: 50, 
    image: null,
    previewUrl: null
  });

  // --- ä¸­å¤®æ°£è±¡ç½² API ä¸²æ¥ ---
  const fetchWeather = useCallback(async (retryCount = 0) => {
    setWeather(prev => ({ ...prev, loading: true }));
    const url = `https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=${CWA_API_KEY}&locationName=${encodeURIComponent(CITY_NAME)}`;
    
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error('API request failed');
      const data = await response.json();
      
      const locationData = data.records.location[0];
      if (!locationData) throw new Error('No location data');
      
      const weatherElements = locationData.weatherElement;
      const wx = weatherElements.find(el => el.elementName === 'Wx').time[0].parameter.parameterName;
      const pop = parseInt(weatherElements.find(el => el.elementName === 'PoP').time[0].parameter.parameterName);
      const minTemp = parseInt(weatherElements.find(el => el.elementName === 'MinT').time[0].parameter.parameterName);
      const maxTemp = parseInt(weatherElements.find(el => el.elementName === 'MaxT').time[0].parameter.parameterName);
      const avgTemp = Math.round((minTemp + maxTemp) / 2);

      let weatherDesc = `å“ˆå›‰ï¼ä»Šå¤© ${CITY_NAME} æ˜¯ ${wx} å–” ğŸŒ¸ æº«åº¦å¤§ç´„åœ¨ ${avgTemp}Â°C å·¦å³ã€‚`;
      if (avgTemp > 28) weatherDesc += " å‡ºé–€è¨˜å¾—å¤šè£œå……æ°´åˆ†ï¼Œåˆ¥ä¸­æš‘å›‰ï¼â˜€ï¸";
      else if (avgTemp < 15) weatherDesc += " å¤©æ°£å†·é¢¼é¢¼ï¼Œè¨˜å¾—ç©¿æš–ä¸€é»åˆ¥æ„Ÿå†’äº†å–”ï¼ğŸ§£";
      else weatherDesc += " æ˜¯å€‹èˆ’é©çš„å¥½å¤©æ°£å‘¢ï¼Œæœ€é©åˆæ‰“æ‰®æ¼‚äº®å‡ºé–€äº†ï¼âœ¨";

      setWeather({
        temp: avgTemp,
        condition: wx,
        pop: pop,
        desc: weatherDesc,
        city: CITY_NAME,
        loading: false
      });
    } catch (error) {
      if (retryCount < 5) {
        const delay = Math.pow(2, retryCount) * 1000;
        setTimeout(() => fetchWeather(retryCount + 1), delay);
      } else {
        setWeather(prev => ({ ...prev, loading: false, error: "å“å‘€ï¼Œæ°£è±¡å°å¹«æ‰‹è¿·è·¯äº†..." }));
      }
    }
  }, []);

  useEffect(() => {
    fetchWeather();
  }, [fetchWeather]);

  const getTheme = () => {
    const t = weather.temp;
    if (t <= 12) {
      return {
        name: 'cold', bg: 'from-[#0072E3]/10 to-[#0072E3]/30', card: 'bg-[#0072E3]', accent: '#0072E3',
        icon: <Snowflake className="text-white/80" />, text: 'å¯’å†·å†¬æ—¥'
      };
    } 
    else if (t > 12 && t <= 22) {
      return {
        name: 'cool', bg: 'from-[#ACD6FF]/20 to-[#ACD6FF]/50', card: 'bg-[#ACD6FF]', accent: '#5A9BD5',
        cardText: 'text-slate-800', icon: <Cloud className="text-slate-600" />, text: 'å¾®æ¶¼æ¸…çˆ½'
      };
    } 
    else if (t > 22 && t <= 28) {
      return {
        name: 'warm', bg: 'from-[#FF9224]/10 to-[#FF9224]/30', card: 'bg-[#FF9224]', accent: '#FF9224', 
        cardText: 'text-white', icon: <CloudSun className="text-white/90" />, text: 'æº«æš–èˆ’é©'
      };
    } 
    else {
      return {
        name: 'hot', bg: 'from-[#FF5151]/10 to-[#FF5151]/30', card: 'bg-[#FF5151]', accent: '#FF5151',
        icon: <Sun className="text-yellow-200" />, text: 'é…·ç†±åš´æš‘'
      };
    }
  };

  const theme = getTheme();

  const generateRecommendation = useCallback(() => {
    const tops = items.filter(i => i.category === 'tops');
    const bottoms = items.filter(i => i.category === 'bottoms');
    const shoes = items.filter(i => i.category === 'shoes');
    const outers = items.filter(i => i.category === 'outerwear');

    const random = (arr) => arr.length ? arr[Math.floor(Math.random() * arr.length)] : null;

    if (tops.length && bottoms.length) {
      let selectedOuter = null;
      if (weather.temp <= 15) {
        selectedOuter = outers.find(i => i.warmth >= 80) || random(outers);
      } else if (weather.temp <= 22) {
        selectedOuter = outers.find(i => i.warmth >= 40 && i.warmth < 80) || random(outers);
      }

      setRecommendation({
        top: random(tops),
        bottom: random(bottoms),
        shoe: random(shoes),
        outer: selectedOuter
      });
    } else {
      setRecommendation(null);
    }
  }, [items, weather]);

  useEffect(() => {
    if (!weather.loading) {
      generateRecommendation();
    }
  }, [weather.loading, items.length, generateRecommendation]);

  const handleImageChange = (e) => {
    const file = e.target.files[0];
    if (file) {
      setNewItem({
        ...newItem,
        image: file,
        previewUrl: URL.createObjectURL(file)
      });
    }
  };

  const addItem = () => {
    if (!newItem.name) return;
    const item = {
      id: Date.now(),
      name: newItem.name,
      category: newItem.category,
      warmth: newItem.warmth,
      image: newItem.previewUrl || 'https://images.unsplash.com/photo-1523381210434-271e8be1f52b?w=200',
    };
    setItems([...items, item]);
    setNewItem({ name: '', category: 'tops', warmth: 50, image: null, previewUrl: null });
    setIsAdding(false);
  };

  const deleteItem = (id) => {
    setItems(items.filter(i => i.id !== id));
  };

  return (
    <div className={`min-h-screen bg-gradient-to-br ${theme.bg} transition-all duration-1000 font-sans text-slate-900 pb-12`}>
      {/* å°èˆªåˆ— */}
      <nav className="bg-white/90 backdrop-blur-md border-b border-white/20 sticky top-0 z-10 px-6 py-4 flex justify-between items-center shadow-sm">
        <div className="flex items-center gap-3">
          <div className="p-2.5 rounded-xl text-white transition-all duration-500 shadow-lg scale-105" style={{ backgroundColor: theme.accent }}>
            <WardrobeIcon size={24} />
          </div>
          <h1 className="text-xl font-black tracking-tight text-slate-800">æ™ºæ…§è¡£æ«ƒ</h1>
        </div>
      </nav>

      <main className="max-w-6xl mx-auto p-6 space-y-12">
        
        {/* ç©¿æ­å»ºè­°å€å¡Š */}
        <section className="grid grid-cols-1 md:grid-cols-12 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-700">
          {/* å·¦å´ï¼šæ°£è±¡è³‡è¨Š */}
          <div className={`md:col-span-4 ${theme.card} ${theme.cardText || 'text-white'} rounded-[2.5rem] p-8 shadow-2xl relative overflow-hidden flex flex-col border border-white/20 h-full min-h-[520px]`}>
            <div className="relative z-10">
              <div className="flex items-center gap-2 opacity-80 mb-6">
                <MapPin size={18} />
                <span className="text-sm font-bold uppercase tracking-widest">{weather.city} Â· çµ¦ä½ çš„æº«é¦¨é å ±</span>
              </div>
              
              <div className="flex flex-col gap-2 mb-8">
                <h2 className="text-7xl font-black tracking-tighter">{weather.loading ? '--' : weather.temp}Â°C</h2>
                <div className="flex items-center gap-3">
                  <p className="text-xl font-bold opacity-90">{weather.condition}</p>
                  <div className="px-3 py-1 bg-white/20 rounded-full text-xs font-bold backdrop-blur-md">
                    é™é›¨ç‡ {weather.pop}%
                  </div>
                </div>
              </div>
            </div>
            
            <div className="relative z-10 space-y-6 flex-grow">
              {/* ç•¶å¤©å¤©æ°£ç¸½è¦½æ¦‚æ³ */}
              <div className="bg-white/15 backdrop-blur-xl rounded-2xl p-5 border border-white/20">
                <div className="flex items-center gap-2 mb-2">
                  <ThermometerSun size={18} className="opacity-80" />
                  <h4 className="text-sm font-black">ä»Šæ—¥å¤©æ°£å°ç¸½è¦½ â˜ï¸</h4>
                </div>
                <p className="text-sm font-medium leading-relaxed opacity-95">
                  {weather.desc}
                </p>
              </div>

              {/* é™é›¨æ©Ÿç‡èˆ‡æ”œå¸¶é›¨å…·å»ºè­° */}
              <div className="bg-white/15 backdrop-blur-xl rounded-2xl p-5 border border-white/20">
                <div className="flex items-center gap-2 mb-2">
                  <Umbrella size={18} className="opacity-80" />
                  <h4 className="text-sm font-black">å‡ºé–€è¦å¸¶å‚˜å—ï¼Ÿ ğŸŒ‚</h4>
                </div>
                <p className="text-sm font-medium leading-relaxed opacity-95">
                  ä»Šå¤©çš„é™é›¨æ©Ÿç‡æ˜¯ <span className="font-bold underline underline-offset-4">{weather.pop}%</span>ã€‚
                  {weather.pop < 20 ? (
                    " å¤©ç©ºçœ‹èµ·ä¾†å¾ˆä¹¾æ·¨ï¼Œå¯ä»¥æ”¾å¿ƒè¼•è£å‡ºé–€ï¼Œä¸éœ€è¦å¸¶å‚˜å–”ï¼â˜€ï¸"
                  ) : weather.pop < 50 ? (
                    " å¯èƒ½æœƒæœ‰å±€éƒ¨çš„å°é©šå–œï¼ˆé™£é›¨ï¼‰ï¼Œä¿éšªèµ·è¦‹æ”¾æŠŠæŠ˜ç–Šå‚˜åœ¨åŒ…åŒ…å§ï¼â›…"
                  ) : (
                    " ä»Šå¤©çš„é›¨ç¥å¾ˆæ´»èºå–”ï¼è¨˜å¾—ä¸€å®šè¦å¸¶æŠŠçµå¯¦çš„é›¨å‚˜ï¼Œä¸¦ç©¿ä¸Šé˜²æ°´çš„é‹å­å–”ï¼ğŸŒ§ï¸"
                  )}
                </p>
              </div>
            </div>

            <div className="relative z-10 mt-6">
              <button 
                onClick={() => fetchWeather()}
                className="flex items-center justify-center gap-2 w-full py-3 bg-white/10 hover:bg-white/20 rounded-2xl text-xs font-black uppercase tracking-widest transition border border-white/10"
              >
                <RefreshCw size={14} className={weather.loading ? "animate-spin" : ""} /> æ›´æ–°æœ€æ–°æ¶ˆæ¯
              </button>
            </div>

            <div className="absolute -right-8 -bottom-8 opacity-10 rotate-12 pointer-events-none">
              <Waves size={240} />
            </div>
          </div>

          {/* å³å´ï¼šæ™ºæ…§æ¨è–¦ */}
          <div className="md:col-span-8 bg-white/95 backdrop-blur-md p-8 rounded-[2.5rem] border border-white shadow-2xl flex flex-col h-full">
            <div className="flex justify-between items-center mb-8">
              <div className="inline-flex items-center gap-2 px-6 py-2.5 rounded-full text-sm font-black border bg-white shadow-sm"
                style={{ color: theme.accent, borderColor: `${theme.accent}33` }}>
                <Sparkles size={18} /> æ™ºæ…§æ¨è–¦
              </div>
              <button 
                onClick={generateRecommendation}
                className="flex items-center gap-2 text-xs font-bold px-4 py-2 rounded-xl border border-slate-200 hover:bg-slate-50 transition"
              >
                <RefreshCw size={14} /> éš¨æ©Ÿ
              </button>
            </div>

            {recommendation ? (
              <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 flex-grow">
                {[recommendation.outer, recommendation.top, recommendation.bottom, recommendation.shoe].filter(Boolean).map((part, idx) => (
                  <div key={idx} className="flex items-center gap-4 bg-slate-50 p-4 rounded-3xl border border-slate-100 group hover:bg-white hover:shadow-xl hover:border-transparent transition-all duration-300">
                    <div className="w-20 h-20 rounded-2xl overflow-hidden shadow-sm flex-shrink-0">
                      <img src={part.image} className="w-full h-full object-cover group-hover:scale-110 transition duration-500" alt="" />
                    </div>
                    <div className="flex-1 min-w-0">
                      <p className="text-[10px] font-black uppercase tracking-widest mb-0.5" style={{ color: theme.accent }}>
                        {part.category === 'tops' ? 'ä¸Šè¡£' : part.category === 'bottoms' ? 'ä¸‹è‘—' : part.category === 'outerwear' ? 'å¤–å¥—' : 'é‹å±¥'}
                      </p>
                      <p className="text-lg font-black text-slate-800 truncate">{part.name}</p>
                      <div className="flex items-center gap-2 mt-1">
                         <div className="h-1 w-12 bg-slate-200 rounded-full overflow-hidden">
                           <div className="h-full" style={{ width: `${part.warmth}%`, backgroundColor: theme.accent }}></div>
                         </div>
                         <p className="text-[10px] text-slate-400 font-bold">ä¿æš– {part.warmth}%</p>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            ) : (
              <div className="flex-grow flex flex-col items-center justify-center text-center py-12 space-y-4">
                 <div className="bg-slate-100 w-24 h-24 rounded-full flex items-center justify-center animate-pulse">
                   <WardrobeIcon size={40} className="text-slate-300" />
                 </div>
                 <div className="space-y-1">
                   <p className="text-slate-800 font-black text-xl">è¡£æ«ƒå°šæœªå°±ç·’</p>
                   <p className="text-slate-400 font-medium max-w-[280px]">è«‹é»æ“Šä¸‹æ–¹çš„ã€Œæ–°å¢è¡£ç‰©ã€æŒ‰éˆ•ï¼Œè®“æ™ºæ…§åŠ©æ‰‹èªè­˜æ‚¨çš„æ”¶è—ã€‚</p>
                 </div>
              </div>
            )}
          </div>
        </section>

        {/* æˆ‘çš„è¡£æ«ƒæ¸…å–® */}
        <section className="pt-12 border-t border-slate-200/50">
          <div className="flex justify-between items-center mb-10">
            <div className="flex items-center gap-4">
              <div className="p-3 bg-white rounded-2xl shadow-sm border border-slate-100 text-slate-400">
                <Library size={24} />
              </div>
              <div>
                <h3 className="text-2xl font-black text-slate-800">æˆ‘çš„è¡£æ«ƒ</h3>
                <p className="text-xs text-slate-400 font-bold uppercase tracking-widest mt-0.5">ç¸½æ”¶è—ä»¶æ•¸: {items.length}</p>
              </div>
            </div>
            <button 
              onClick={() => setIsAdding(true)}
              className="group flex items-center gap-3 text-sm font-black text-white px-8 py-4 rounded-2xl hover:brightness-110 transition shadow-xl active:scale-95"
              style={{ backgroundColor: theme.accent }}
            >
              <Plus size={20} className="group-hover:rotate-90 transition-transform duration-300" /> æ–°å¢è¡£ç‰©
            </button>
          </div>

          {items.length > 0 ? (
            <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
              {items.map(item => (
                <div key={item.id} className="bg-white rounded-[2rem] border border-slate-100 overflow-hidden hover:shadow-2xl transition-all group relative">
                  <div className="h-48 bg-slate-100 relative overflow-hidden">
                    <img src={item.image} alt={item.name} className="w-full h-full object-cover group-hover:scale-105 transition duration-500" />
                    <div className="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-300"></div>
                    <button 
                      onClick={() => deleteItem(item.id)}
                      className="absolute top-4 right-4 p-2.5 bg-white text-red-500 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-all transform hover:scale-110"
                    >
                      <Trash2 size={16} />
                    </button>
                    <div className="absolute bottom-4 left-4 px-3 py-1 bg-white/90 backdrop-blur shadow-sm rounded-lg text-[10px] text-slate-800 font-black">
                      ä¿æš–åº¦ {item.warmth}%
                    </div>
                  </div>
                  <div className="p-6">
                    <span className="text-[10px] font-black uppercase tracking-widest px-3 py-1.5 rounded-xl border inline-block" 
                      style={{ color: theme.accent, borderColor: `${theme.accent}33`, backgroundColor: `${theme.accent}08` }}>
                      {item.category === 'tops' ? 'ä¸Šè¡£' : item.category === 'bottoms' ? 'ä¸‹è‘—' : item.category === 'outerwear' ? 'å¤–å¥—' : item.category === 'shoes' ? 'é‹å±¥' : 'é…ä»¶'}
                    </span>
                    <p className="text-md font-bold mt-4 truncate text-slate-800 leading-tight">{item.name}</p>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <div className="py-24 flex flex-col items-center justify-center border-2 border-dashed border-slate-200 rounded-[3rem] bg-white/40 space-y-4">
               <div className="w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center">
                 <LayoutGrid size={32} className="text-slate-200" />
               </div>
               <p className="text-slate-400 font-bold">ç›®å‰è¡£æ«ƒç©ºç©ºå¦‚ä¹Ÿï¼Œè¶•å¿«æ–°å¢ç¬¬ä¸€ä»¶å–®å“å§ï¼</p>
            </div>
          )}
        </section>
        
        <footer className="mt-20 text-center text-slate-400 text-[11px] font-medium flex flex-col items-center gap-3 opacity-60">
          <div className="flex items-center gap-1">
            <Info size={14} /> è³‡æ–™ä¾†æºï¼šä¸­å¤®æ°£è±¡ç½²è³‡æ–™é–‹æ”¾å¹³å°
          </div>
          <p>Â© 2024 æ™ºæ…§è¡£æ«ƒ SmartWardrobe Assistant</p>
        </footer>
      </main>

      {/* æ–°å¢è¡£ç‰©å½ˆçª— */}
      {isAdding && (
        <div className="fixed inset-0 bg-slate-900/40 backdrop-blur-md flex items-end sm:items-center justify-center z-50 p-4 animate-in fade-in duration-300">
          <div className="bg-white w-full max-w-xl rounded-[3rem] p-10 shadow-2xl animate-in slide-in-from-bottom-8 duration-500 max-h-[90vh] overflow-y-auto">
            <div className="flex justify-between items-center mb-10">
              <div className="flex items-center gap-3">
                <div className="p-2 bg-orange-50 text-orange-500 rounded-xl">
                  <Plus size={24} />
                </div>
                <h2 className="text-3xl font-black text-slate-800 tracking-tighter">æ·»åŠ å–®å“</h2>
              </div>
              <button onClick={() => setIsAdding(false)} className="p-3 hover:bg-slate-100 rounded-full transition text-slate-300 group">
                <RefreshCw size={24} className="rotate-45 group-hover:rotate-0 transition-transform duration-300" />
              </button>
            </div>
            
            <div className="space-y-8">
              {/* åœ–ç‰‡ä¸Šå‚³ */}
              <div className="relative group">
                <input type="file" accept="image/*" onChange={handleImageChange} className="absolute inset-0 opacity-0 cursor-pointer z-10" />
                <div className={`w-full h-56 rounded-[2rem] border-2 border-dashed flex flex-col items-center justify-center transition-all overflow-hidden ${newItem.previewUrl ? 'border-transparent shadow-inner' : 'border-slate-200 bg-slate-50'}`}>
                  {newItem.previewUrl ? (
                    <img src={newItem.previewUrl} className="w-full h-full object-cover" alt="Preview" />
                  ) : (
                    <>
                      <div className="p-4 bg-white rounded-full shadow-sm mb-3">
                        <Upload className="text-slate-400" size={28} />
                      </div>
                      <p className="text-sm font-black text-slate-400 uppercase tracking-widest">é»æ“Šæˆ–æ‹–æ›³ç…§ç‰‡</p>
                    </>
                  )}
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div className="space-y-2">
                  <label className="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-2">è¡£ç‰©åç¨±</label>
                  <input 
                    type="text" 
                    value={newItem.name}
                    onChange={(e) => setNewItem({...newItem, name: e.target.value})}
                    className="w-full bg-slate-50 border-2 border-slate-100 rounded-2xl px-6 py-4 focus:border-slate-800 transition outline-none font-bold text-slate-800"
                    placeholder="ä¾‹å¦‚ï¼šç™½è‰²æ£‰è³ªT-shirt"
                  />
                </div>

                <div className="space-y-2">
                  <label className="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-2">åˆ†é¡</label>
                  <div className="relative">
                    <select 
                      value={newItem.category}
                      onChange={(e) => setNewItem({...newItem, category: e.target.value})}
                      className="w-full bg-slate-50 border-2 border-slate-100 rounded-2xl px-6 py-4 outline-none focus:border-slate-800 transition appearance-none font-bold cursor-pointer text-slate-800"
                    >
                      <option value="tops">ä¸Šè¡£ (Tops)</option>
                      <option value="bottoms">ä¸‹è‘— (Bottoms)</option>
                      <option value="outerwear">å¤–å¥— (Outerwear)</option>
                      <option value="shoes">é‹å±¥ (Shoes)</option>
                      <option value="accessories">é…ä»¶ (Accessories)</option>
                    </select>
                    <ChevronRight className="absolute right-5 top-1/2 -translate-y-1/2 rotate-90 text-slate-300 pointer-events-none" size={20} />
                  </div>
                </div>
              </div>

              <div className="space-y-4">
                <div className="flex justify-between items-center px-2">
                  <label className="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]">ä¿æš–ä¿‚æ•¸</label>
                  <span className="text-sm font-black text-slate-800 bg-slate-100 px-4 py-1 rounded-full">{newItem.warmth}%</span>
                </div>
                <input 
                  type="range" 
                  min="0" 
                  max="100" 
                  value={newItem.warmth}
                  onChange={(e) => setNewItem({...newItem, warmth: parseInt(e.target.value)})}
                  className="w-full h-3 bg-slate-100 rounded-full appearance-none cursor-pointer accent-slate-800"
                />
              </div>

              <button 
                onClick={addItem}
                className="w-full text-white py-6 rounded-[2rem] font-black text-xl mt-6 shadow-2xl hover:brightness-110 transition active:scale-95 disabled:opacity-50"
                disabled={!newItem.name}
                style={{ backgroundColor: theme.accent, boxShadow: `0 20px 40px -12px ${theme.accent}55` }}
              >
                æ”¶é€²è¡£æ«ƒ
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default App;
                      
